{"ast":null,"code":"import React,{useState}from'react';import{useDroppable}from'@dnd-kit/core';import DraggableCard from'./DraggableCard';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const STATUSES=['Ideas','In Progress','Completed'];// Threshold in pixels to consider pointer movement a click, not a drag\nconst CLICK_MOVEMENT_THRESHOLD=5;const KanbanColumn=_ref=>{let{columnId,title,cards,onCardClick,onMoveCard,onAddCard,isDragging,setIsDragging,isDraggingCard}=_ref;// Filter/sort state\nconst[showPinnedOnly,setShowPinnedOnly]=React.useState(false);const[sortMode,setSortMode]=React.useState('none');// Filter and sort cards\nlet safeCards=Array.isArray(cards)?cards:[];let filteredCards=showPinnedOnly?safeCards.filter(c=>c===null||c===void 0?void 0:c.pinned):safeCards;if(sortMode==='due'){filteredCards=[...filteredCards].sort((a,b)=>{if(!a.dueDate&&!b.dueDate)return 0;if(!a.dueDate)return 1;if(!b.dueDate)return-1;return new Date(a.dueDate).getTime()-new Date(b.dueDate).getTime();});}else if(sortMode==='title'){filteredCards=[...filteredCards].sort((a,b)=>a.title.localeCompare(b.title));}const[newCardTitle,setNewCardTitle]=useState('');// droppable area for this column\nconst{setNodeRef:setDroppableRef,isOver}=useDroppable({id:columnId});const[justDropped,setJustDropped]=React.useState(null);// Snap animation: when a card is dropped into this column, animate it\nReact.useEffect(()=>{if(isOver&&isDraggingCard&&!cards.some(c=>c.id===isDraggingCard)){setJustDropped(isDraggingCard);setTimeout(()=>setJustDropped(null),160);}},[isOver,isDraggingCard,cards]);return/*#__PURE__*/_jsxs(\"div\",{className:`bg-gray-100 rounded-lg px-3 md:px-4 py-4 shadow-md flex flex-col min-h-[400px] max-w-[360px] min-w-[260px] flex-shrink-0 transition-all duration-150 ${isOver?'ring-2 ring-accent bg-accent/5':''}`,children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-800\",children:title}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2 mb-3\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center text-xs gap-1\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:showPinnedOnly,onChange:e=>setShowPinnedOnly(e.target.checked)}),\"Pinned Only\"]}),/*#__PURE__*/_jsxs(\"select\",{className:\"text-xs px-1 py-0.5 border rounded\",value:sortMode,onChange:e=>setSortMode(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"none\",children:\"Sort: Default\"}),/*#__PURE__*/_jsx(\"option\",{value:\"due\",children:\"Sort: Due Date\"}),/*#__PURE__*/_jsx(\"option\",{value:\"title\",children:\"Sort: Title A-Z\"})]})]}),/*#__PURE__*/_jsx(\"div\",{ref:setDroppableRef,className:\"flex flex-col gap-3\",children:filteredCards.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-400 text-xs text-center py-4\",children:\"No cards yet.\"}):filteredCards.map(card=>/*#__PURE__*/_jsx(DraggableCard,{card:card,columnId:columnId,onCardClick:onCardClick,onMoveCard:onMoveCard,isDragging:isDragging&&isDraggingCard===card.id,snap:justDropped===card.id},card.id))}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"flex gap-2\",onSubmit:e=>{e.preventDefault();if(newCardTitle.trim()){onAddCard(newCardTitle.trim());setNewCardTitle('');}},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newCardTitle,onChange:e=>setNewCardTitle(e.target.value),placeholder:\"New card title\",className:\"flex-1 px-2 py-1 border rounded\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"px-3 py-1 bg-accent text-white rounded disabled:opacity-50\",disabled:!newCardTitle.trim(),children:\"Add\"})]})})]});};export default KanbanColumn;","map":{"version":3,"names":["React","useState","useDroppable","DraggableCard","jsx","_jsx","jsxs","_jsxs","STATUSES","CLICK_MOVEMENT_THRESHOLD","KanbanColumn","_ref","columnId","title","cards","onCardClick","onMoveCard","onAddCard","isDragging","setIsDragging","isDraggingCard","showPinnedOnly","setShowPinnedOnly","sortMode","setSortMode","safeCards","Array","isArray","filteredCards","filter","c","pinned","sort","a","b","dueDate","Date","getTime","localeCompare","newCardTitle","setNewCardTitle","setNodeRef","setDroppableRef","isOver","id","justDropped","setJustDropped","useEffect","some","setTimeout","className","children","type","checked","onChange","e","target","value","ref","length","map","card","snap","onSubmit","preventDefault","trim","placeholder","disabled"],"sources":["C:/Users/aikid/CascadeProjects/chalet-fractal-flow/src/components/KanbanColumn.tsx"],"sourcesContent":["import React, { FC, useState } from 'react';\nimport { useDroppable } from '@dnd-kit/core';\nimport type { CardData } from './KanbanBoard';\nimport DraggableCard from './DraggableCard';\n\ninterface KanbanColumnProps {\n  columnId: string;\n  title: string;\n  cards: CardData[];\n  onCardClick: (card: CardData) => void;\n  onMoveCard: (card: CardData, destColumnId: string) => void;\n  onAddCard: (title: string) => void;\n  isDragging: boolean;\n  setIsDragging: React.Dispatch<React.SetStateAction<boolean>>;\n  isDraggingCard: string | null;\n}\n\nconst STATUSES = ['Ideas', 'In Progress', 'Completed'];\n\n// Threshold in pixels to consider pointer movement a click, not a drag\nconst CLICK_MOVEMENT_THRESHOLD = 5;\n\nconst KanbanColumn: FC<KanbanColumnProps> = ({\n  columnId,\n  title,\n  cards,\n  onCardClick,\n  onMoveCard,\n  onAddCard,\n  isDragging,\n  setIsDragging,\n  isDraggingCard,\n}) => {\n  // Filter/sort state\n  const [showPinnedOnly, setShowPinnedOnly] = React.useState(false);\n  const [sortMode, setSortMode] = React.useState<'due' | 'title' | 'none'>('none');\n\n  // Filter and sort cards\n  let safeCards = Array.isArray(cards) ? cards : [];\nlet filteredCards = showPinnedOnly ? safeCards.filter(c => c?.pinned) : safeCards;\n  if (sortMode === 'due') {\n    filteredCards = [...filteredCards].sort((a, b) => {\n      if (!a.dueDate && !b.dueDate) return 0;\n      if (!a.dueDate) return 1;\n      if (!b.dueDate) return -1;\n      return new Date(a.dueDate).getTime() - new Date(b.dueDate).getTime();\n    });\n  } else if (sortMode === 'title') {\n    filteredCards = [...filteredCards].sort((a, b) => a.title.localeCompare(b.title));\n  }\n\n  const [newCardTitle, setNewCardTitle] = useState<string>('');\n\n  // droppable area for this column\n  const { setNodeRef: setDroppableRef, isOver } = useDroppable({ id: columnId });\n  const [justDropped, setJustDropped] = React.useState<string | null>(null);\n\n  // Snap animation: when a card is dropped into this column, animate it\n  React.useEffect(() => {\n    if (isOver && isDraggingCard && !cards.some(c => c.id === isDraggingCard)) {\n      setJustDropped(isDraggingCard);\n      setTimeout(() => setJustDropped(null), 160);\n    }\n  }, [isOver, isDraggingCard, cards]);\n\n  return (\n    <div className={`bg-gray-100 rounded-lg px-3 md:px-4 py-4 shadow-md flex flex-col min-h-[400px] max-w-[360px] min-w-[260px] flex-shrink-0 transition-all duration-150 ${isOver ? 'ring-2 ring-accent bg-accent/5' : ''}`}>\n      <h3 className=\"text-lg font-semibold text-gray-800\">{title}</h3>\n      {/* Filter/Sort Controls */}\n      <div className=\"flex gap-2 mb-3\">\n        <label className=\"flex items-center text-xs gap-1\">\n          <input type=\"checkbox\" checked={showPinnedOnly} onChange={e => setShowPinnedOnly(e.target.checked)} />\n          Pinned Only\n        </label>\n        <select\n          className=\"text-xs px-1 py-0.5 border rounded\"\n          value={sortMode}\n          onChange={e => setSortMode(e.target.value as 'due' | 'title' | 'none')}\n        >\n          <option value=\"none\">Sort: Default</option>\n          <option value=\"due\">Sort: Due Date</option>\n          <option value=\"title\">Sort: Title A-Z</option>\n        </select>\n      </div>\n      <div ref={setDroppableRef} className=\"flex flex-col gap-3\">\n        {filteredCards.length === 0 ? (\n          <div className=\"text-gray-400 text-xs text-center py-4\">No cards yet.</div>\n        ) : (\n          filteredCards.map(card => (\n            <DraggableCard\n              key={card.id}\n              card={card}\n              columnId={columnId}\n              onCardClick={onCardClick}\n              onMoveCard={onMoveCard}\n              isDragging={isDragging && isDraggingCard === card.id}\n              snap={justDropped === card.id}\n            />\n          ))\n        )}\n      </div>\n      <div className=\"mt-4\">\n        <form className=\"flex gap-2\" onSubmit={e => { e.preventDefault(); if (newCardTitle.trim()) { onAddCard(newCardTitle.trim()); setNewCardTitle(''); } }}>\n          <input\n            type=\"text\"\n            value={newCardTitle}\n            onChange={e => setNewCardTitle(e.target.value)}\n            placeholder=\"New card title\"\n            className=\"flex-1 px-2 py-1 border rounded\"\n          />\n          <button type=\"submit\" className=\"px-3 py-1 bg-accent text-white rounded disabled:opacity-50\" disabled={!newCardTitle.trim()}>\n            Add\n          </button>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default KanbanColumn;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}