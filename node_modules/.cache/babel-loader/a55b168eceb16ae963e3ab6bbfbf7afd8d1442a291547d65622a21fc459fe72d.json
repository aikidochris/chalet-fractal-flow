{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import Fuse from'fuse.js';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function GlobalSearch(){const[query,setQuery]=useState('');const[results,setResults]=useState([]);const fuseRef=useRef(null);const[allItems,setAllItems]=useState([]);useEffect(()=>{setAllItems([{id:'1',title:'My Test Board',type:'board'},{id:'col-1',title:'First Idea',type:'card',boardId:'1'},{id:'col-2',title:'Doing This Now',type:'card',boardId:'1'},{id:'col-3',title:'Done!',type:'card',boardId:'1'}]);},[]);useEffect(()=>{if(!query.trim()){setResults([]);return;}if(!fuseRef.current){fuseRef.current=new Fuse(allItems,{keys:['title']});}else{fuseRef.current.setCollection(allItems);}const fuseResults=fuseRef.current.search(query).map(r=>r.item);setResults(fuseResults);},[query,allItems]);const handleSelect=item=>{window.dispatchEvent(new CustomEvent('search-select',{detail:item}));setQuery('');setResults([]);};return/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"search\",className:\"rounded-lg px-4 py-2 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-accent bg-white text-gray-800 w-60\",placeholder:\"Search cards, boards...\",value:query,onChange:e=>setQuery(e.target.value),style:{color:'#222'}}),results.length>0&&/*#__PURE__*/_jsx(\"ul\",{className:\"absolute bg-white shadow-lg rounded mt-1 w-full max-h-60 overflow-auto z-10\",children:results.map((result,idx)=>/*#__PURE__*/_jsxs(\"li\",{className:\"p-2 hover:bg-accent/10 cursor-pointer\",onClick:()=>handleSelect(result),children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:result.title}),/*#__PURE__*/_jsxs(\"span\",{className:\"ml-2 text-xs text-gray-400\",children:[\"[\",result.type,\"]\"]})]},result.id))})]});}export default GlobalSearch;","map":{"version":3,"names":["React","useState","useEffect","useRef","Fuse","jsx","_jsx","jsxs","_jsxs","GlobalSearch","query","setQuery","results","setResults","fuseRef","allItems","setAllItems","id","title","type","boardId","trim","current","keys","setCollection","fuseResults","search","map","r","item","handleSelect","window","dispatchEvent","CustomEvent","detail","className","children","placeholder","value","onChange","e","target","style","color","length","result","idx","onClick"],"sources":["C:/Users/aikid/CascadeProjects/chalet-fractal-flow/src/components/GlobalSearch.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport Fuse from 'fuse.js';\n\ninterface SearchItem {\n  id: string;\n  title: string;\n  type: 'board' | 'card';\n  boardId?: string;\n}\n\nfunction GlobalSearch() {\n  const [query, setQuery] = useState<string>('');\n  const [results, setResults] = useState<SearchItem[]>([]);\n\n  const fuseRef = useRef<Fuse<SearchItem> | null>(null);\n\n  const [allItems, setAllItems] = useState<SearchItem[]>([]);\n  useEffect(() => {\n    setAllItems([\n      { id: '1', title: 'My Test Board', type: 'board' },\n      { id: 'col-1', title: 'First Idea', type: 'card', boardId: '1' },\n      { id: 'col-2', title: 'Doing This Now', type: 'card', boardId: '1' },\n      { id: 'col-3', title: 'Done!', type: 'card', boardId: '1' },\n    ]);\n  }, []);\n\n  useEffect(() => {\n    if (!query.trim()) {\n      setResults([]);\n      return;\n    }\n    if (!fuseRef.current) {\n      fuseRef.current = new Fuse(allItems, { keys: ['title'] });\n    } else {\n      fuseRef.current.setCollection(allItems);\n    }\n    const fuseResults = fuseRef.current.search(query).map(r => r.item);\n    setResults(fuseResults);\n  }, [query, allItems]);\n\n  const handleSelect = (item: SearchItem) => {\n    window.dispatchEvent(new CustomEvent('search-select', { detail: item }));\n    setQuery('');\n    setResults([]);\n  };\n\n  return (\n    <div className=\"relative\">\n      <input\n        type=\"search\"\n        className=\"rounded-lg px-4 py-2 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-accent bg-white text-gray-800 w-60\"\n        placeholder=\"Search cards, boards...\"\n        value={query}\n        onChange={e => setQuery(e.target.value)}\n        style={{ color: '#222' }}\n      />\n      {results.length > 0 && (\n        <ul className=\"absolute bg-white shadow-lg rounded mt-1 w-full max-h-60 overflow-auto z-10\">\n          {results.map((result, idx) => (\n            <li key={result.id} className=\"p-2 hover:bg-accent/10 cursor-pointer\" onClick={() => handleSelect(result)}>\n              <span className=\"font-semibold\">{result.title}</span>\n              <span className=\"ml-2 text-xs text-gray-400\">[{result.type}]</span>\n            </li>\n          ))}\n        </ul>\n      )}\n    </div>\n  );\n}\n\nexport default GlobalSearch;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}