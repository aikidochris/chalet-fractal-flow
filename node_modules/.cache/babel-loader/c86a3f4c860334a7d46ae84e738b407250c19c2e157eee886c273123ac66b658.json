{"ast":null,"code":"import React,{useRef,useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";const COLORS=[{name:'default',label:'Default',value:'#fff',border:'#e5e7eb'},// white\n{name:'blue',label:'Blue',value:'#e0edfa',border:'#60a5fa'},{name:'green',label:'Green',value:'#e5f6e7',border:'#34d399'},{name:'yellow',label:'Yellow',value:'#fffbe5',border:'#fbbf24'},{name:'red',label:'Red',value:'#fdeaea',border:'#f87171'},{name:'purple',label:'Purple',value:'#f3e8ff',border:'#a78bfa'},{name:'grey',label:'Grey',value:'#f3f4f6',border:'#9ca3af'}];const CardColorPopover=_ref=>{let{open,anchorEl,selected,onSelect,onClose}=_ref;const popoverRef=useRef(null);const firstBtnRef=useRef(null);// Position popover below anchor\nuseEffect(()=>{if(open&&anchorEl&&popoverRef.current){const rect=anchorEl.getBoundingClientRect();popoverRef.current.style.position='fixed';popoverRef.current.style.top=`${rect.bottom+6}px`;popoverRef.current.style.left=`${rect.left}px`;popoverRef.current.style.zIndex='9999';setTimeout(()=>{var _firstBtnRef$current;return(_firstBtnRef$current=firstBtnRef.current)===null||_firstBtnRef$current===void 0?void 0:_firstBtnRef$current.focus();},20);}},[open,anchorEl]);// Close on click outside\nuseEffect(()=>{if(!open)return;function handle(event){if(popoverRef.current&&!popoverRef.current.contains(event.target)&&anchorEl&&!anchorEl.contains(event.target)){onClose();}}document.addEventListener('mousedown',handle);return()=>document.removeEventListener('mousedown',handle);},[open,anchorEl,onClose]);// Keyboard navigation\nconst handleKeyDown=e=>{if(e.key==='Escape')onClose();};if(!open)return null;return/*#__PURE__*/_jsx(\"div\",{ref:popoverRef,onKeyDown:handleKeyDown,className:\"bg-white border border-gray-200 rounded-lg shadow-lg p-2 flex gap-2\",role:\"menu\",\"aria-label\":\"Set card color\",children:COLORS.map((color,i)=>/*#__PURE__*/_jsx(\"button\",{ref:i===0?firstBtnRef:undefined,className:`w-8 h-8 rounded-full border-2 flex items-center justify-center focus:outline-accent focus:ring-2 focus:ring-accent/50 ${selected===color.name?'ring-2 ring-accent':''}`,style:{background:color.value,borderColor:color.border},\"aria-label\":color.label,tabIndex:0,onClick:()=>{onSelect(color.name);onClose();},children:selected===color.name&&/*#__PURE__*/_jsx(\"svg\",{width:\"18\",height:\"18\",fill:\"none\",viewBox:\"0 0 20 20\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M6 10.5l3 3 5-5\",stroke:\"#333\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\"})})},color.name))});};export default CardColorPopover;","map":{"version":3,"names":["React","useRef","useEffect","jsx","_jsx","COLORS","name","label","value","border","CardColorPopover","_ref","open","anchorEl","selected","onSelect","onClose","popoverRef","firstBtnRef","current","rect","getBoundingClientRect","style","position","top","bottom","left","zIndex","setTimeout","_firstBtnRef$current","focus","handle","event","contains","target","document","addEventListener","removeEventListener","handleKeyDown","e","key","ref","onKeyDown","className","role","children","map","color","i","undefined","background","borderColor","tabIndex","onClick","width","height","fill","viewBox","d","stroke","strokeWidth","strokeLinecap","strokeLinejoin"],"sources":["C:/Users/aikid/CascadeProjects/chalet-fractal-flow/src/components/CardColorPopover.tsx"],"sourcesContent":["import React, { useRef, useEffect } from 'react';\n\nconst COLORS = [\n  { name: 'default', label: 'Default', value: '#fff', border: '#e5e7eb' }, // white\n  { name: 'blue', label: 'Blue', value: '#e0edfa', border: '#60a5fa' },\n  { name: 'green', label: 'Green', value: '#e5f6e7', border: '#34d399' },\n  { name: 'yellow', label: 'Yellow', value: '#fffbe5', border: '#fbbf24' },\n  { name: 'red', label: 'Red', value: '#fdeaea', border: '#f87171' },\n  { name: 'purple', label: 'Purple', value: '#f3e8ff', border: '#a78bfa' },\n  { name: 'grey', label: 'Grey', value: '#f3f4f6', border: '#9ca3af' }\n];\n\ninterface CardColorPopoverProps {\n  open: boolean;\n  anchorEl: HTMLElement | null;\n  selected: string;\n  onSelect: (color: string) => void;\n  onClose: () => void;\n}\n\nconst CardColorPopover: React.FC<CardColorPopoverProps> = ({ open, anchorEl, selected, onSelect, onClose }) => {\n  const popoverRef = useRef<HTMLDivElement>(null);\n  const firstBtnRef = useRef<HTMLButtonElement>(null);\n\n  // Position popover below anchor\n  useEffect(() => {\n    if (open && anchorEl && popoverRef.current) {\n      const rect = anchorEl.getBoundingClientRect();\n      popoverRef.current.style.position = 'fixed';\n      popoverRef.current.style.top = `${rect.bottom + 6}px`;\n      popoverRef.current.style.left = `${rect.left}px`;\n      popoverRef.current.style.zIndex = '9999';\n      setTimeout(() => firstBtnRef.current?.focus(), 20);\n    }\n  }, [open, anchorEl]);\n\n  // Close on click outside\n  useEffect(() => {\n    if (!open) return;\n    function handle(event: MouseEvent) {\n      if (\n        popoverRef.current &&\n        !popoverRef.current.contains(event.target as Node) &&\n        anchorEl &&\n        !anchorEl.contains(event.target as Node)\n      ) {\n        onClose();\n      }\n    }\n    document.addEventListener('mousedown', handle);\n    return () => document.removeEventListener('mousedown', handle);\n  }, [open, anchorEl, onClose]);\n\n  // Keyboard navigation\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === 'Escape') onClose();\n  };\n\n  if (!open) return null;\n  return (\n    <div ref={popoverRef} onKeyDown={handleKeyDown} className=\"bg-white border border-gray-200 rounded-lg shadow-lg p-2 flex gap-2\" role=\"menu\" aria-label=\"Set card color\">\n      {COLORS.map((color, i) => (\n        <button\n          key={color.name}\n          ref={i === 0 ? firstBtnRef : undefined}\n          className={`w-8 h-8 rounded-full border-2 flex items-center justify-center focus:outline-accent focus:ring-2 focus:ring-accent/50 ${selected === color.name ? 'ring-2 ring-accent' : ''}`}\n          style={{ background: color.value, borderColor: color.border }}\n          aria-label={color.label}\n          tabIndex={0}\n          onClick={() => { onSelect(color.name); onClose(); }}\n        >\n          {selected === color.name && (\n            <svg width=\"18\" height=\"18\" fill=\"none\" viewBox=\"0 0 20 20\"><path d=\"M6 10.5l3 3 5-5\" stroke=\"#333\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/></svg>\n          )}\n        </button>\n      ))}\n    </div>\n  );\n};\n\nexport default CardColorPopover;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}