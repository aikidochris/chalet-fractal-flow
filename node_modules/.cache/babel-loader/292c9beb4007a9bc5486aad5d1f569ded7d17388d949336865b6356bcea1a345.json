{"ast":null,"code":"import React,{useState,useEffect}from'react';// import { db } from '../firebase';\n// import { collection, query, onSnapshot, updateDoc, addDoc, doc, serverTimestamp, orderBy, deleteDoc } from 'firebase/firestore';\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function CardModal(_ref){let{card,onClose}=_ref;if(!card){return/*#__PURE__*/_jsx(\"div\",{className:\"p-8 text-center text-gray-400\",children:\"Loading card...\"});}const[menuOpen,setMenuOpen]=useState(false);const menuRef=React.useRef(null);// Close menu on outside click\nuseEffect(()=>{if(!menuOpen)return;function handleClick(e){if(menuRef.current&&!menuRef.current.contains(e.target)){setMenuOpen(false);}}document.addEventListener('mousedown',handleClick);return()=>document.removeEventListener('mousedown',handleClick);},[menuOpen]);const[tasks,setTasks]=useState([]);const[fadingTaskIds,setFadingTaskIds]=useState([]);const[newTask,setNewTask]=useState('');const[editingTitle,setEditingTitle]=useState(false);const[title,setTitle]=useState((card===null||card===void 0?void 0:card.title)||'');const[dueDate,setDueDate]=useState((card===null||card===void 0?void 0:card.dueDate)||'');const[saving,setSaving]=useState(false);const[editingTaskId,setEditingTaskId]=useState(null);const[editingTaskTitle,setEditingTaskTitle]=useState('');// For click-off-to-close\nconst modalContentRef=React.useRef(null);const[closing,setClosing]=useState(false);// Handle modal close with animation\nconst handleModalClose=()=>{setClosing(true);setTimeout(()=>{onClose();setClosing(false);},300);};// Delete card\nconst handleDeleteCard=async()=>{// Dummy: Just close modal\nonClose();};// Delete subtask\nconst handleDeleteTask=async taskId=>{setFadingTaskIds(ids=>[...ids,taskId]);setTimeout(()=>{setTasks(t=>t.filter(task=>task.id!==taskId));setFadingTaskIds(ids=>ids.filter(id=>id!==taskId));},300);};// Dummy-data mode: no Firestore. If you want to simulate subtasks, you can setTasks([...]) here.\nuseEffect(()=>{setTasks([{id:'task-1',title:'Research topic',completed:false},{id:'task-2',title:'Write draft',completed:true}]);setTitle(card.title);setDueDate(card.dueDate||'');},[card.id]);// Progress calculation\nconst completedCount=tasks.filter(t=>t.completed).length;const progress=tasks.length?completedCount/tasks.length*100:0;// Add new task\nconst handleAddTask=async()=>{if(!newTask.trim())return;setTasks(t=>[...t,{id:`task-${Date.now()}`,title:newTask.trim(),completed:false}]);setNewTask('');};// Toggle pin\nconst handleTogglePin=async()=>{// Dummy: Just toggle local state\nsetTitle(card.title);setDueDate(card.dueDate||'');};// Update due date (live update local state, save on Save)\nconst handleDueDateChange=e=>{setDueDate(e.target.value);};// Save all changes\nconst handleSave=async()=>{setSaving(false);setEditingTitle(false);onClose();};// Edit subtask title\nconst handleEditTaskTitle=task=>{setEditingTaskId(task.id);setEditingTaskTitle(task.title);};const handleTaskTitleChange=e=>{setEditingTaskTitle(e.target.value);};const handleTaskTitleBlur=async task=>{if(editingTaskTitle.trim()&&editingTaskTitle!==task.title){setTasks(t=>t.map(tsk=>tsk.id===task.id?{...tsk,title:editingTaskTitle.trim()}:tsk));}setEditingTaskId(null);setEditingTaskTitle('');};const handleTaskTitleKeyDown=async(e,task)=>{if(e.key==='Enter'){await handleTaskTitleBlur(task);}else if(e.key==='Escape'){setEditingTaskId(null);setEditingTaskTitle('');}};return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center z-50\",onClick:e=>{if(e.target===e.currentTarget)onClose();},children:/*#__PURE__*/_jsxs(\"div\",{ref:modalContentRef,className:`bg-white rounded-lg p-6 w-full max-w-md flex flex-col transition-transform transition-opacity duration-200 ease-in-out ${closing?'modal-animate-out':'modal-animate-in'}`,tabIndex:-1,onClick:e=>e.stopPropagation(),onKeyDown:e=>{if(e.key==='Escape')handleModalClose();},children:[/*#__PURE__*/_jsxs(\"header\",{className:\"flex justify-between items-start gap-4 mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 flex items-center gap-2 min-w-0\",children:editingTitle?/*#__PURE__*/_jsx(\"input\",{className:\"text-xl font-semibold border-b border-accent focus:outline-none focus:ring-2 focus:ring-accent px-1 w-full min-w-0\",value:title,autoFocus:true,onChange:e=>setTitle(e.target.value),onBlur:()=>setEditingTitle(false),onKeyDown:e=>{if(e.key==='Enter')setEditingTitle(false);},maxLength:100,style:{wordBreak:'break-word'}}):/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold cursor-pointer truncate break-words max-w-full whitespace-pre-line\",style:{wordBreak:'break-word',overflowWrap:'break-word',maxWidth:'100%'},onClick:()=>setEditingTitle(true),title:title,children:title})}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",ref:menuRef,children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setMenuOpen(o=>!o),className:\"btn w-8 h-8 flex items-center justify-center rounded hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-accent\",\"aria-haspopup\":\"true\",\"aria-expanded\":menuOpen,\"aria-label\":\"Card options\",type:\"button\",children:/*#__PURE__*/_jsx(\"span\",{\"aria-hidden\":\"true\",className:\"text-xl\",children:\"\\u2022\\u2022\\u2022\"})}),menuOpen&&/*#__PURE__*/_jsxs(\"div\",{className:\"absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded shadow-lg z-50\",role:\"menu\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setMenuOpen(false);handleModalClose();},className:\"btn w-full text-left px-4 py-2 hover:bg-gray-100 text-gray-800\",role:\"menuitem\",children:\"Close without saving\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setMenuOpen(false);if(window.confirm('Delete this card?'))handleDeleteCard();},className:\"btn w-full text-left px-4 py-2 hover:bg-gray-100 text-red-600\",role:\"menuitem\",children:\"Delete Card\"})]})]})]}),card.description&&/*#__PURE__*/_jsx(\"p\",{className:\"mb-4 text-gray-700\",children:card.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-600 text-sm mb-1\",children:\"Due Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:dueDate||'',onChange:handleDueDateChange,className:\"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-accent\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-gray-200 rounded h-2 overflow-hidden\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-accent h-2 rounded transition-all duration-300\",style:{width:`${progress}%`}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-500 mt-1 text-right\",children:[Math.round(progress),\"% complete\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-medium text-gray-800 mb-3\",children:\"Checklist\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col gap-3 max-h-48 overflow-auto\",children:tasks.map(task=>/*#__PURE__*/_jsxs(\"div\",{className:`flex items-center gap-2 group px-1 py-1 rounded hover:bg-gray-50 transition-all${fadingTaskIds.includes(task.id)?' checklist-fade-out':''}`,children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:task.completed,onChange:()=>updateDoc(doc(db,'cards',card.id,'tasks',task.id),{completed:!task.completed})}),editingTaskId===task.id?/*#__PURE__*/_jsx(\"input\",{className:\"flex-1 px-1 border-b border-accent focus:outline-none focus:ring-2 focus:ring-accent\",value:editingTaskTitle,autoFocus:true,onChange:handleTaskTitleChange,onBlur:()=>handleTaskTitleBlur(task),onKeyDown:e=>handleTaskTitleKeyDown(e,task)}):/*#__PURE__*/_jsx(\"span\",{className:`checklist-strike${task.completed?' checked line-through text-gray-500':''}`,onClick:()=>handleEditTaskTitle(task),style:{cursor:'pointer'},children:task.title}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteTask(task.id),className:\"ml-2 px-2 py-0.5 text-xs bg-red-100 text-red-700 rounded hover:bg-red-200 opacity-0 group-hover:opacity-100 transition-opacity\",title:\"Delete subtask\",children:\"Delete\"})]},task.id))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 flex gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{value:newTask,onChange:e=>setNewTask(e.target.value),placeholder:\"New task\",className:\"flex-1 px-2 py-1 border rounded focus:outline-none focus:ring-2 focus:ring-accent\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAddTask,className:\"btn px-3 py-1 bg-accent text-white rounded hover:bg-teal-600\",children:\"Add\"})]}),/*#__PURE__*/_jsxs(\"footer\",{className:\"flex justify-between items-center pt-6 border-t mt-6\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleTogglePin,className:\"btn px-3 py-1 text-accent border border-accent bg-transparent rounded hover:bg-accent hover:text-white transition-colors text-xs focus:outline-none focus:ring-2 focus:ring-accent\",tabIndex:0,\"aria-label\":card.pinned?'Unpin card':'Pin card',type:\"button\",children:card.pinned?'Unpin':'Pin'}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSave,disabled:saving,className:\"btn px-5 py-2 bg-accent text-white rounded shadow hover:bg-teal-600 disabled:opacity-60 focus:outline-none focus:ring-2 focus:ring-accent\",tabIndex:0,type:\"button\",children:\"Save\"})]})]})});}export default CardModal;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","CardModal","_ref","card","onClose","className","children","menuOpen","setMenuOpen","menuRef","useRef","handleClick","e","current","contains","target","document","addEventListener","removeEventListener","tasks","setTasks","fadingTaskIds","setFadingTaskIds","newTask","setNewTask","editingTitle","setEditingTitle","title","setTitle","dueDate","setDueDate","saving","setSaving","editingTaskId","setEditingTaskId","editingTaskTitle","setEditingTaskTitle","modalContentRef","closing","setClosing","handleModalClose","setTimeout","handleDeleteCard","handleDeleteTask","taskId","ids","t","filter","task","id","completed","completedCount","length","progress","handleAddTask","trim","Date","now","handleTogglePin","handleDueDateChange","value","handleSave","handleEditTaskTitle","handleTaskTitleChange","handleTaskTitleBlur","map","tsk","handleTaskTitleKeyDown","key","onClick","currentTarget","ref","tabIndex","stopPropagation","onKeyDown","autoFocus","onChange","onBlur","maxLength","style","wordBreak","overflowWrap","maxWidth","o","type","role","window","confirm","description","width","Math","round","includes","checked","updateDoc","doc","db","cursor","placeholder","pinned","disabled"],"sources":["C:/Users/aikid/CascadeProjects/chalet-fractal-flow/src/components/CardModal.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\n// import { db } from '../firebase';\n// import { collection, query, onSnapshot, updateDoc, addDoc, doc, serverTimestamp, orderBy, deleteDoc } from 'firebase/firestore';\nimport { CardData } from './KanbanBoard';\n\ninterface TaskData {\n  id: string;\n  title: string;\n  completed: boolean;\n}\n\ninterface CardModalProps {\n  card: CardData;\n  onClose: () => void;\n}\n\nfunction CardModal({ card, onClose }: CardModalProps) {\n  if (!card) {\n    return <div className=\"p-8 text-center text-gray-400\">Loading card...</div>;\n  }\n  const [menuOpen, setMenuOpen] = useState(false);\n  const menuRef = React.useRef<HTMLDivElement>(null);\n\n  // Close menu on outside click\n  useEffect(() => {\n    if (!menuOpen) return;\n    function handleClick(e: MouseEvent) {\n      if (menuRef.current && !menuRef.current.contains(e.target as Node)) {\n        setMenuOpen(false);\n      }\n    }\n    document.addEventListener('mousedown', handleClick);\n    return () => document.removeEventListener('mousedown', handleClick);\n  }, [menuOpen]);\n  const [tasks, setTasks] = useState<TaskData[]>([]);\n  const [fadingTaskIds, setFadingTaskIds] = useState<string[]>([]);\n  const [newTask, setNewTask] = useState('');\n  const [editingTitle, setEditingTitle] = useState(false);\n  const [title, setTitle] = useState(card?.title || '');\n  const [dueDate, setDueDate] = useState(card?.dueDate || '');\n  const [saving, setSaving] = useState(false);\n  const [editingTaskId, setEditingTaskId] = useState<string | null>(null);\n  const [editingTaskTitle, setEditingTaskTitle] = useState('');\n  // For click-off-to-close\n  const modalContentRef = React.useRef<HTMLDivElement>(null);\n  const [closing, setClosing] = useState(false);\n\n  // Handle modal close with animation\n  const handleModalClose = () => {\n    setClosing(true);\n    setTimeout(() => {\n      onClose();\n      setClosing(false);\n    }, 300);\n  }\n\n  // Delete card\n  const handleDeleteCard = async () => {\n    // Dummy: Just close modal\n    onClose();\n  };\n\n  // Delete subtask\n  const handleDeleteTask = async (taskId: string) => {\n    setFadingTaskIds(ids => [...ids, taskId]);\n    setTimeout(() => {\n      setTasks(t => t.filter(task => task.id !== taskId));\n      setFadingTaskIds(ids => ids.filter(id => id !== taskId));\n    }, 300);\n  };\n\n\n\n  // Dummy-data mode: no Firestore. If you want to simulate subtasks, you can setTasks([...]) here.\n  useEffect(() => {\n    setTasks([\n      { id: 'task-1', title: 'Research topic', completed: false },\n      { id: 'task-2', title: 'Write draft', completed: true },\n    ]);\n    setTitle(card.title);\n    setDueDate(card.dueDate || '');\n  }, [card.id]);\n\n  // Progress calculation\n  const completedCount = tasks.filter(t => t.completed).length;\n  const progress = tasks.length ? (completedCount / tasks.length) * 100 : 0;\n\n  // Add new task\n  const handleAddTask = async () => {\n    if (!newTask.trim()) return;\n    setTasks(t => [...t, { id: `task-${Date.now()}`, title: newTask.trim(), completed: false }]);\n    setNewTask('');\n  };\n\n  // Toggle pin\n  const handleTogglePin = async () => {\n    // Dummy: Just toggle local state\n    setTitle(card.title);\n    setDueDate(card.dueDate || '');\n  };\n\n  // Update due date (live update local state, save on Save)\n  const handleDueDateChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setDueDate(e.target.value);\n  };\n\n  // Save all changes\n  const handleSave = async () => {\n    setSaving(false);\n    setEditingTitle(false);\n    onClose();\n  };\n\n  // Edit subtask title\n  const handleEditTaskTitle = (task: TaskData) => {\n    setEditingTaskId(task.id);\n    setEditingTaskTitle(task.title);\n  };\n\n  const handleTaskTitleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setEditingTaskTitle(e.target.value);\n  };\n\n  const handleTaskTitleBlur = async (task: TaskData) => {\n    if (editingTaskTitle.trim() && editingTaskTitle !== task.title) {\n      setTasks(t => t.map(tsk => tsk.id === task.id ? { ...tsk, title: editingTaskTitle.trim() } : tsk));\n    }\n    setEditingTaskId(null);\n    setEditingTaskTitle('');\n  };\n\n  const handleTaskTitleKeyDown = async (e: React.KeyboardEvent<HTMLInputElement>, task: TaskData) => {\n    if (e.key === 'Enter') {\n      await handleTaskTitleBlur(task);\n    } else if (e.key === 'Escape') {\n      setEditingTaskId(null);\n      setEditingTaskTitle('');\n    }\n  };\n\n  return (\n    <div\n      className=\"fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center z-50\"\n      onClick={e => {\n        if (e.target === e.currentTarget) onClose();\n      }}\n    >\n      <div\n        ref={modalContentRef}\n        className={`bg-white rounded-lg p-6 w-full max-w-md flex flex-col transition-transform transition-opacity duration-200 ease-in-out ${closing ? 'modal-animate-out' : 'modal-animate-in'}`}\n        tabIndex={-1}\n        onClick={e => e.stopPropagation()}\n        onKeyDown={e => {\n          if (e.key === 'Escape') handleModalClose();\n        }}\n      >\n        <header className=\"flex justify-between items-start gap-4 mb-4\">\n          <div className=\"flex-1 flex items-center gap-2 min-w-0\">\n            {editingTitle ? (\n              <input\n                className=\"text-xl font-semibold border-b border-accent focus:outline-none focus:ring-2 focus:ring-accent px-1 w-full min-w-0\"\n                value={title}\n                autoFocus\n                onChange={e => setTitle(e.target.value)}\n                onBlur={() => setEditingTitle(false)}\n                onKeyDown={e => { if (e.key === 'Enter') setEditingTitle(false); }}\n                maxLength={100}\n                style={{ wordBreak: 'break-word' }}\n              />\n            ) : (\n              <h2\n                className=\"text-xl font-semibold cursor-pointer truncate break-words max-w-full whitespace-pre-line\"\n                style={{ wordBreak: 'break-word', overflowWrap: 'break-word', maxWidth: '100%' }}\n                onClick={() => setEditingTitle(true)}\n                title={title}\n              >\n                {title}\n              </h2>\n            )}\n          </div>\n          {/* Three dots menu for close/delete */}\n          <div className=\"relative\" ref={menuRef}>\n            <button onClick={() => setMenuOpen(o => !o)} className=\"btn w-8 h-8 flex items-center justify-center rounded hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-accent\" aria-haspopup=\"true\" aria-expanded={menuOpen} aria-label=\"Card options\" type=\"button\">\n              <span aria-hidden=\"true\" className=\"text-xl\">•••</span>\n            </button>\n            {menuOpen && (\n              <div className=\"absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded shadow-lg z-50\" role=\"menu\">\n                <button onClick={() => { setMenuOpen(false); handleModalClose(); }} className=\"btn w-full text-left px-4 py-2 hover:bg-gray-100 text-gray-800\" role=\"menuitem\">\n                  Close without saving\n                </button>\n                <button onClick={() => { setMenuOpen(false); if (window.confirm('Delete this card?')) handleDeleteCard(); }} className=\"btn w-full text-left px-4 py-2 hover:bg-gray-100 text-red-600\" role=\"menuitem\">\n                  Delete Card\n                </button>\n              </div>\n            )}\n          </div>\n        </header>\n        {card.description && <p className=\"mb-4 text-gray-700\">{card.description}</p>}\n        <div className=\"mb-4\">\n          <label className=\"block text-gray-600 text-sm mb-1\">Due Date</label>\n          <input\n            type=\"date\"\n            value={dueDate || ''}\n            onChange={handleDueDateChange}\n            className=\"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-accent\"\n          />\n        </div>\n        <div className=\"mb-2\">\n          <div className=\"w-full bg-gray-200 rounded h-2 overflow-hidden\">\n            <div className=\"bg-accent h-2 rounded transition-all duration-300\" style={{ width: `${progress}%` }} />\n          </div>\n          <div className=\"text-xs text-gray-500 mt-1 text-right\">{Math.round(progress)}% complete</div>\n        </div>\n        <div className=\"mb-6\">\n          <h3 className=\"font-medium text-gray-800 mb-3\">Checklist</h3>\n          <div className=\"flex flex-col gap-3 max-h-48 overflow-auto\">\n            {tasks.map(task => (\n              <div key={task.id} className={`flex items-center gap-2 group px-1 py-1 rounded hover:bg-gray-50 transition-all${fadingTaskIds.includes(task.id) ? ' checklist-fade-out' : ''}`}>\n                <input\n                  type=\"checkbox\"\n                  checked={task.completed}\n                  onChange={() => updateDoc(doc(db, 'cards', card.id, 'tasks', task.id), { completed: !task.completed })}\n                />\n                {editingTaskId === task.id ? (\n                  <input\n                    className=\"flex-1 px-1 border-b border-accent focus:outline-none focus:ring-2 focus:ring-accent\"\n                    value={editingTaskTitle}\n                    autoFocus\n                    onChange={handleTaskTitleChange}\n                    onBlur={() => handleTaskTitleBlur(task)}\n                    onKeyDown={e => handleTaskTitleKeyDown(e, task)}\n                  />\n                ) : (\n                  <span\n                    className={`checklist-strike${task.completed ? ' checked line-through text-gray-500' : ''}`}\n                    onClick={() => handleEditTaskTitle(task)}\n                    style={{ cursor: 'pointer' }}\n                  >\n                    {task.title}\n                  </span>\n                )}\n                <button\n                  onClick={() => handleDeleteTask(task.id)}\n                  className=\"ml-2 px-2 py-0.5 text-xs bg-red-100 text-red-700 rounded hover:bg-red-200 opacity-0 group-hover:opacity-100 transition-opacity\"\n                  title=\"Delete subtask\"\n                >\n                  Delete\n                </button>\n              </div>\n            ))}\n          </div>\n        </div>\n        <div className=\"mt-2 flex gap-2\">\n          <input\n            value={newTask}\n            onChange={e => setNewTask(e.target.value)}\n            placeholder=\"New task\"\n            className=\"flex-1 px-2 py-1 border rounded focus:outline-none focus:ring-2 focus:ring-accent\"\n          />\n          <button onClick={handleAddTask} className=\"btn px-3 py-1 bg-accent text-white rounded hover:bg-teal-600\">Add</button>\n        </div>\n        <footer className=\"flex justify-between items-center pt-6 border-t mt-6\">\n          <button onClick={handleTogglePin} className=\"btn px-3 py-1 text-accent border border-accent bg-transparent rounded hover:bg-accent hover:text-white transition-colors text-xs focus:outline-none focus:ring-2 focus:ring-accent\" tabIndex={0} aria-label={card.pinned ? 'Unpin card' : 'Pin card'} type=\"button\">\n            {card.pinned ? 'Unpin' : 'Pin'}\n          </button>\n          <button onClick={handleSave} disabled={saving} className=\"btn px-5 py-2 bg-accent text-white rounded shadow hover:bg-teal-600 disabled:opacity-60 focus:outline-none focus:ring-2 focus:ring-accent\" tabIndex={0} type=\"button\">\n            Save\n          </button>\n        </footer>\n      </div>\n    </div>\n  );\n}\n\nexport default CardModal;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}